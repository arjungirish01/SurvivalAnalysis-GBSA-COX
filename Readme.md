# Post-HCT Survival Data Analysis

Predicting individualized survival risk scores for patients following Hematopoietic Cell Transplantation (HCT) using the CIBMTR dataset.

## Overview
This project implements advanced survival analysis to estimate patient-specific risk profiles following HCT. By moving beyond traditional binary classification (survival vs. non-survival), this analysis explicitly models **time-to-event outcomes** and incorporates **censored data**, providing a more accurate and clinically relevant prognostic tool.

## Motivation
Traditional machine learning models often treat survival as a binary problem. This project addresses the limitations of that approach:
* **Time Sensitivity**: Standard classification ignores *when* an event occurs.
* **Censoring**: Patients who leave a study before an event occurs are often dropped or misclassified in binary models; survival analysis includes this data.
* **Dynamic Risk**: It allows for the estimation of risk at specific time intervals (e.g., 100-day vs. 2-year risk).

## Clinical Application
The individualized risk scores generated by this model serve as a **Decision Support System** for healthcare providers:
* **Personalized Monitoring**: Identifying high-risk patients who require intensive post-transplant follow-up.
* **Candidate Assessment**: Quantifying risk for borderline transplant candidates to determine feasibility.
* **Informed Counseling**: Providing families with data-driven survival estimates and realistic expectations.
* **Risk Stratification**: Grouping patients for clinical trials based on their predicted hazard ratios.

## Methodology
The data pipeline is designed to handle the complexity of the CIBMTR dataset (28,000+ records, 60+ variables):

### 1. Data Preprocessing & Cleaning
* **Missingness Tracking**: For every binary feature, a `_missing` indicator column is created. This treats "missing data" as a potential clinical signal rather than just noise.
* **Imputation**: Numeric features (e.g., `donor_age`, `karnofsky_score`) are imputed using mean or median values.
* **Target Transformation**: The target variables `efs` (Event-Free Survival indicator) and `efs_time` (Time to Event) are structured into a structured array format required for survival estimators.

### 2. Feature Engineering
* **Binary Encoding**: Categorical medical history (e.g., diabetes, arrhythmia) is converted to boolean values.
* **Ordinal Mapping**: The **Disease Risk Index (DRI)** is mapped to an ordinal scale (Low â†’ Very High) to preserve the inherent hierarchy of disease severity.

## Project Structure & Models
The project is organized into a modular workflow within the Jupyter environment:

### Models Used
1.  **Cox Proportional Hazards (CPH)**: A semi-parametric model used as a baseline to understand the linear impact of clinical features on the hazard rate.
2.  **Gradient Boosting Survival Analysis (GBSA)**: A powerful ensemble model from the `scikit-survival` library. It captures non-linear relationships and complex interactions between features (e.g., age vs. comorbidity score) that linear models might miss.

### Evaluation
The model performance is evaluated using the **Concordance Index (C-index)**, which measures the model's ability to correctly rank the survival times of pairs of patients.

## Technologies Used
* **Python**
* **Pandas & NumPy**: For high-performance data manipulation.
* **Scikit-Survival**: For GBSA and survival-specific loss functions.
* **Scikit-Learn**: For preprocessing pipelines and cross-validation.
* **Matplotlib & Seaborn**: For clinical distribution and survival curve visualizations.

## Usage

### 1. **Installation**
Ensure you have the necessary libraries installed:
```bash
pip install requirements.txt
```
###2. **Run**: Execute `post_hct.ipynb` in Jupyter or Google Colab.

## License & Data Usage

### Code License
This project is licensed under the **MIT License**.

### Data Attribution
The data used in this project is provided by the **Center for International Blood and Marrow Transplant Research (CIBMTR)**. 
- Usage of the dataset is subject to the original institutional terms.
- Users are responsible for ensuring compliance with CIBMTR data privacy and ethical guidelines.